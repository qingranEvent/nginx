"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{99088:function(Fn,R,v){v.r(R),v.d(R,{default:function(){return hn}});var O=v(30577),M=v.n(O),U=v(24047),I=v.n(U),z=v(93236),q=v(41978),_=v.n(q),G=v(24434),K=v(4306),A=v(98916),T=v(80991),Z=v(73179),H=v(7887),Y=v(96486),nn=function(r,i,e){r.plugin(["AMap.ToolBar","AMap.Driving","AMap.Geocoder"],function(){var m=new r.ToolBar;i.addControl(m);var F=new r.Driving({map:i,panel:"panel",policy:r.DrivingPolicy.REAL_TRAFFIC});window.APlugins={ready:!0,plugins:["ToolBar","AMap.Driving","AMap.Geocoder"],driving:F},typeof e=="function"&&e(F)})},en=v(90967),V=v.n(en),an=[{id:1,lngLat:[116.267375,40.143629],roadInfo:"\u767E\u6C99\u8DEF\u8DEF\u5E84\u6865\u4E1C 300\u7C73",forbiddenInfo:"\u4ECE\u897F\u5F80\u4E1C\u884C\u9A76",dateTime:"2021/2/22 22:17:48"},{id:2,lngLat:[116.278517,40.168843],roadInfo:"\u5357\u4E30\u8DEF\u4E2D\u592E\u8D22\u7ECF\u5927\u5B66\u897F\u95E8\u7EA2\u7EFF\u706F\u8DEF\u53E3",forbiddenInfo:"\u5357\u5317\u53CC\u5411\uFF0C\u52A0\u4ECE\u5317\u5411\u5357\u8F85\u8DEF",dateTime:"2020/3/7 14:43:37"}],c;(function(f){f.normal="normal",f.road="road",f.direction="direction",f.redLight="redLight",f.tollStation="tollStation"})(c||(c={}));var x;(function(f){f.start="start",f.end="end",f.avoid="avoid",f.waypoint="waypoint"})(x||(x={}));var tn=[{id:1,title:"\u5DE9\u534E\u5BB6\u56ED\u9644\u8FD1\u51FA\u53D1\u8FDB\u5165\u516D\u73AF\u4E3B\u8DEF",start:{lnglat:[116.274918,40.143854],keyWord:"\u987A\u6C99\u8DEF 19 \u53F7\u9662 3 \u533A\u5357\u95E8",relativeArea:["\u987A\u6C99\u8DEF 19 \u53F7\u9662, 1\u30012\u30013\u30014 \u533A\uFF0C\u5373\u8DEF\u677E\u8857 87\u300188\u300189\u300190 \u53F7\u9662","\u5DE9\u534E\u5BB6\u56ED","\u4E09\u6C34\u9752\u6E05\u5E84\u56ED"],isSave:!1},end:{lnglat:[116.328943,40.17084],keyWord:"\u767E\u5584\u6536\u8D39\u7AD9",relativeArea:["\u516D\u73AF\u4E3B\u8DEF\uFF0C\u767E\u5584\u6536\u8D39\u7AD9\u8FDB\u3001\u51FA\u53E3"],isSave:!1},processIsSave:!0,description:`\u4ECE\u8D77\u59CB\u4F4D\u7F6E\u9644\u8FD1\u8FDB\u5165\u5230 \u767E\u6C99\u8DEF\u4E3B\u8DEF \u540E\uFF0C
      \u6CBF\u7740 \u767E\u6C99\u8DEF\u81EA\u897F\u5411\u4E1C \u884C\u9A76\uFF0C\u76F4\u5230\u884C\u9A76\u5230\u4E00\u4E2A \u4E09\u53C9\u7EA2\u7EFF\u706F\u8DEF\u53E3\uFF0C\u5411 \u5DE6\u524D\u65B9 \u7EE7\u7EED\u6CBF\u7740\u767E\u6C99\u8DEF\u884C\u9A76\uFF0C
      \u76F4\u5230\u524D\u65B9\u51FA\u73B0 \u5357\u767E\u8DEF \uFF0C\u7EE7\u7EED\u6CBF\u7740\u5357\u767E\u8DEF\u884C\u9A76\uFF0C\u53F3\u8F6C\u8FDB\u5165\u987A\u6C99\u8DEF\u4E3B\u8DEF \uFF0C\u7136\u540E\u5728\u7B2C\u4E00\u4E2A \u7EA2\u7EFF\u706F\u8DEF\u53E3 \u5DE6\u8F6C\uFF0C\u8FDB\u5165\u516D\u73AF\u531D\u9053\uFF0C\u8FDB\u800C\u5230\u8FBE \u767E\u5584\u6536\u8D39\u7AD9 .`,navigation:[{type:c.normal,text:"\u4ECE\u8D77\u59CB\u4F4D\u7F6E\u9644\u8FD1\u8FDB\u5165\u5230"},{type:c.road,text:"\u767E\u6C99\u8DEF\u4E3B\u8DEF"},{type:c.road,text:"\u767E\u6C99\u8DEF\u4E3B\u8DEF"},{type:c.normal,text:"\u6CBF\u7740"},{type:c.direction,text:"\u767E\u6C99\u8DEF\u81EA\u897F\u5411\u4E1C"},{type:c.normal,text:"\u884C\u9A76\uFF0C\u76F4\u5230\u884C\u9A76\u5230\u4E00\u4E2A"},{type:c.redLight,text:"\u4E09\u53C9\u7EA2\u7EFF\u706F\u8DEF\u53E3"},{type:c.direction,text:"\u5DE6\u524D\u65B9"},{type:c.normal,text:"\u7EE7\u7EED\u6CBF\u7740\u767E\u6C99\u8DEF\u884C\u9A76\uFF0C\u76F4\u5230\u524D\u65B9\u51FA\u73B0"},{type:c.road,text:"\u5357\u767E\u8DEF"},{type:c.normal,text:"\uFF0C\u7EE7\u7EED\u6CBF\u7740\u5357\u767E\u8DEF\u884C\u9A76\uFF0C"},{type:c.direction,text:"\u53F3\u8F6C"},{type:c.normal,text:"\u8FDB\u5165"},{type:c.road,text:"\u987A\u6C99\u8DEF\u4E3B\u8DEF"},{type:c.normal,text:"\uFF0C\u7136\u540E\u5728\u7B2C\u4E00\u4E2A"},{type:c.redLight,text:"\u7EA2\u7EFF\u706F\u8DEF\u53E3"},{type:c.direction,text:"\u5DE6\u8F6C"},{type:c.normal,text:"\uFF0C\u8FDB\u5165\u516D\u73AF\u531D\u9053\uFF0C\u8FDB\u800C\u5230\u8FBE"},{type:c.tollStation,text:"\u767E\u5584\u6536\u8D39\u7AD9"}],lnglat:{avoidPolygons:[[[116.277517,40.169843],[116.279517,40.169843],[116.277517,40.167843],[116.279517,40.167843]],[[116.246046,40.163198],[116.248046,40.163198],[116.246046,40.161198],[116.248046,40.161198]],[[116.290339,40.17625],[116.288339,40.17625],[116.290339,40.17425],[116.288339,40.17425]]]}}],rn=tn,on=V()(an),X=V()(rn),ln=function(r,i,e){var m=X.find(function(d){var u=d.id;return u===i});m||console.error("\u4E0D\u5B58\u5728 id \u4E3A ".concat(i," \u7684\u70ED\u95E8\u7EBF\u8DEF"));var F=[],s=m,y=s.start,E=s.end,h=m==null?void 0:m.lnglat,t=h.avoidPolygons,g=h.waypoints;t&&r.setAvoidPolygons(t.map(function(d){return d.map(function(u){var o=M()(u,2),l=o[0],p=o[1];return new e.LngLat(l,p)})})),g&&g.forEach(function(d){var u=M()(d,2),o=u[0],l=u[1];F.push(new e.LngLat(o,l))}),r.search(new e.LngLat(y.lnglat[0],y.lnglat[1]),new e.LngLat(E.lnglat[0],E.lnglat[1]),{waypoints:F},function(d,u){d==="complete"?(console.log("\u7ED8\u5236\u9A7E\u8F66\u8DEF\u7EBF\u5B8C\u6210"),window.ADriving={result:u}):console.error("\u83B7\u53D6\u9A7E\u8F66\u6570\u636E\u5931\u8D25\uFF1A"+u)})},sn=function(r){var i=r.AMap,e=r.instance,m={type:"image",image:"https://vdata.amap.com/icons/b18/1/2.png",size:[16,16],anchor:"center"},F={content:"\u4E2D\u90AE\u901F\u9012\u6613",direction:"right",offset:[-20,-5],style:{fontSize:12,fillColor:"#22886f",strokeColor:"#fff",strokeWidth:2}},s=new i.LabelsLayer({zooms:[3,20],zIndex:1e3,collision:!0,allowCollision:!0});on.forEach(function(y){var E=y.lngLat;if(E){var h=new i.LabelMarker({name:"\u6807\u6CE82",position:E,zIndex:16,icon:m});s.add(h)}}),e.add(s)},un=v(86378),dn=v.n(un),N=null,J=!0,D={start:[],end:[],avoid:[],waypoint:[]},Q=function(r,i){var e;(e=D[r])===null||e===void 0||e.splice(i,1)},cn=function(r,i,e){var m=[],F=i,s=F.start,y=F.end,E=F.avoid,h=F.waypoint,t=s[0].marker.getPosition(),g=y[0].marker.getPosition();if(E){var d=.001,u=.01;r.setAvoidPolygons(E.map(function(o){var l=o.marker,p=l.getPosition(),j=p.lng,C=p.lat,k=[j-d,C+u],P=[j+d,C+u],W=[j-d,C-u],L=[j+d,C-u];return[new e.LngLat(k[0],k[1]),new e.LngLat(P[0],P[1]),new e.LngLat(W[0],W[1]),new e.LngLat(L[0],L[1])]}))}h&&h.forEach(function(o){var l=o.marker,p=l.getPosition(),j=p.lng,C=p.lat;m.push(new e.LngLat(j,C))}),r.search(new e.LngLat(t.lng,t.lat),new e.LngLat(g.lng,g.lat),{waypoints:m},function(o,l){o==="complete"?(console.log("\u7ED8\u5236\u9A7E\u8F66\u8DEF\u7EBF\u5B8C\u6210"),window.ADriving={result:l}):(H.ZP.error("\u83B7\u53D6\u9A7E\u8F66\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\u8DEF\u7EBF\u5173\u8054\u7684\u70B9\u4F4D"),console.error("\u83B7\u53D6\u9A7E\u8F66\u6570\u636E\u5931\u8D25: ",l))})},vn=function(r){var i=r.AMap,e=r.mapInstance,m=r.onSelect,F=new i.Geocoder({city:"010",radius:1e3}),s=new i.ContextMenu,y=function(h,t){if(J){var g,d=D[h];switch(h){case x.start:{if(D.start.length>0){var u;e.remove((u=D.start.shift())===null||u===void 0?void 0:u.marker)}g=new i.Marker({map:e,position:t==null?void 0:t.lnglat,content:`
            <div
              class="amap-simple-marker-label"
              style="color: #fff; background-color: green; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; border-radius: 50%;"
            >
              \u8D77
              <span></span>
            </div>
          `});break}case x.end:{if(D.end.length>0){var o;e.remove((o=D.end.shift())===null||o===void 0?void 0:o.marker)}g=new i.Marker({map:e,position:t==null?void 0:t.lnglat,content:`
            <div
              class="amap-simple-marker-label"
              style="color: #fff; background-color: red; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; border-radius: 50%;"
            >
              \u7EC8
              <span></span>
            </div>
          `});break}case x.avoid:{if(D.avoid.length>2){var l;e.remove((l=D.avoid.shift())===null||l===void 0?void 0:l.marker)}g=new i.Marker({map:e,position:t==null?void 0:t.lnglat,content:`
            <div
              class="amap-simple-marker-label"
              style="color: #fff; background-color: blue; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; border-radius: 50%;"
            >
              \u907F
              <span></span>
            </div>
          `});break}case x.waypoint:{if(D.waypoint.length>9){var p;e.remove((p=D.waypoint.shift())===null||p===void 0?void 0:p.marker)}g=new i.Marker({map:e,position:t==null?void 0:t.lnglat,content:`
            <div
              class="amap-simple-marker-label"
              style="color: #fff; background-color: black; display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; border-radius: 50%;"
            >
              \u7ECF
              <span></span>
            </div>
          `});break}}d.push({marker:g,addr:""}),s.close(),F.getAddress(t.lnglat,function(j,C){var k=d.slice(-1)[0];j==="complete"&&C.regeocode?k.addr=C.regeocode.formattedAddress:k.addr="\u9009\u62E9\u7684\u5730\u70B9\u6682\u65E0\u5BF9\u5E94\u5B9E\u9645\u5730\u5740",J=!0,m(dn()({},D))})}};return s.addItem("\u8BBE\u4E3A\u8D77\u70B9",function(){y(x.start,N)},0),s.addItem("\u8BBE\u4E3A\u7EC8\u70B9",function(){y(x.end,N)},1),s.addItem("\u8BBE\u7F6E\u4E3A\u907F\u8BA9",function(){y(x.avoid,N)},2),s.addItem("\u8BBE\u4E3A\u9014\u5F84",function(){y(x.waypoint,N)},3),e.on("click",function(E){s.open(e,E.lnglat),N=E}),s},a={container:"container___lGekF",header:"header___Peyd6",main:"main___mAvzf",slide:"slide___oDNry","hot-lines":"hot-lines___qpn3I","line-item":"line-item___gTbKx",position:"position___gWSie",row1:"row1___M98Er",tit:"tit___Bv60B",row2:"row2___DO48U","custom-line":"custom-line___XYAuk","btn-wrapper":"btn-wrapper___IYaAG",item:"item___sWkVl",content:"content___nGCOl","text-pannel":"text-pannel___KEPLx",footer:"footer___Ku20G"},n=v(62086),b,w,B,mn,S,$=(b={},I()(b,x.start,[]),I()(b,x.end,[]),I()(b,x.avoid,[]),I()(b,x.waypoint,[]),b),pn=function(r){var i,e,m=r.customeLineMarkers,F=m.start,s=m.end,y=m.avoid,E=m.waypoint,h=r.tabKey,t=r.onDeleteMarker,g=r.onTabChange,d=r.onloadNavigation,u=r.onClearNavgation;return(0,n.jsxs)(G.Z,{defaultActiveKey:"search_line",onChange:function(l){g(l)},className:a["tabs-container"],children:[(0,n.jsx)(G.Z.TabPane,{tab:"\u70ED\u95E8\u7EBF\u8DEF",disabled:!0,children:(0,n.jsx)("div",{className:a["hot-lines"],children:X.map(function(o){var l=o.id,p=o.title,j=o.description,C=o.start,k=o.end,P=o.duration,W=o.navigation;return(0,n.jsxs)(K.Z,{title:p,className:a["line-item"],children:[(0,n.jsx)("div",{className:a.start,children:(0,n.jsxs)("div",{className:a.position,children:[(0,n.jsxs)("span",{className:a.row1,children:[(0,n.jsx)("span",{className:a.tit,children:"\u8D77\u70B9\uFF1A"}),(0,n.jsx)("span",{children:C.keyWord})]}),(0,n.jsxs)("span",{className:a.row2,children:[(0,n.jsx)("span",{className:a.tit,children:"\u5468\u8FB9\u533A\u57DF\uFF1A"}),(0,n.jsx)("span",{children:C.relativeArea.join("\u3002 ")})]})]})}),(0,n.jsx)("div",{className:a.end,children:(0,n.jsxs)("div",{className:a.position,children:[(0,n.jsxs)("span",{className:a.row1,children:[(0,n.jsx)("span",{className:a.tit,children:"\u7EC8\u70B9\uFF1A"}),(0,n.jsx)("span",{children:k.keyWord})]}),(0,n.jsxs)("span",{className:a.row2,children:[(0,n.jsx)("span",{className:a.tit,children:"\u5468\u8FB9\u533A\u57DF\uFF1A"}),(0,n.jsx)("span",{children:k.relativeArea.join(", ")})]})]})}),P&&(0,n.jsx)("div",{className:a.duration,children:P.map(function(L){return(0,n.jsx)("span",{children:L.keyWord})})}),(0,n.jsx)("div",{className:a.description,children:(0,n.jsx)(A.Z.Paragraph,{copyable:{text:j,tooltips:["\u590D\u5236","\u590D\u5236\u6210\u529F"],format:"text/plain"},ellipsis:{rows:3,expandable:!0,symbol:"\u67E5\u770B\u8BE6\u60C5",tooltip:j},children:W.map(function(L,gn){var fn=L.type,xn=L.text;return(0,n.jsx)(A.Z.Text,{mark:fn!==c.normal,children:xn},gn)})})})]},l)})})},"hot_line"),(0,n.jsx)(G.Z.TabPane,{tab:"\u81EA\u5B9A\u4E49\u7EBF\u8DEF",children:(0,n.jsxs)("div",{className:a["custom-line"],children:[(0,n.jsxs)("div",{className:a["btn-wrapper"],children:[(0,n.jsx)(T.ZP,{onClick:d,children:"\u751F\u6210"}),(0,n.jsx)(T.ZP,{onClick:u,children:"\u6E05\u9664"})]}),(0,n.jsxs)("div",{className:a.item,children:[(0,n.jsx)("h4",{className:a.tit,children:"\u9009\u62E9\u8D77\u59CB\u4F4D\u7F6E"}),(0,n.jsx)(A.Z.Paragraph,{mark:!0,children:(i=F[0])===null||i===void 0?void 0:i.addr})]}),(0,n.jsxs)("div",{className:a.item,children:[(0,n.jsx)("h4",{className:a.tit,children:"\u9009\u62E9\u76EE\u6807\u4F4D\u7F6E"}),(0,n.jsx)(A.Z.Paragraph,{mark:!0,children:(e=s[0])===null||e===void 0?void 0:e.addr})]}),(0,n.jsxs)("div",{className:a.item,children:[(0,n.jsx)("h4",{className:a.tit,children:"\u8BBE\u7F6E\u907F\u8BA9\u70B9(\u5730\u56FE\u53F3\u952E\u9009\u62E9)"}),y.length>0&&(0,n.jsx)(Z.ZP,{dataSource:y,renderItem:function(l,p){var j=l.addr;return(0,n.jsx)(Z.ZP.Item,{children:(0,n.jsxs)(A.Z.Paragraph,{type:"danger",children:[j,(0,n.jsx)("a",{onClick:function(){Q(x.avoid,p),t(x.avoid,p)},children:"\u79FB\u9664"},"list-loadmore-edit")]})})}})]}),(0,n.jsxs)("div",{className:a.item,children:[(0,n.jsx)("h4",{className:a.tit,children:"\u8BBE\u7F6E\u4E2D\u9014\u7ECF\u8FC7\u70B9(\u5730\u56FE\u53F3\u952E\u9009\u62E9)"}),E.length>0&&(0,n.jsx)(Z.ZP,{dataSource:E,renderItem:function(l,p){var j=l.addr;return(0,n.jsx)(Z.ZP.Item,{children:(0,n.jsxs)(A.Z.Paragraph,{type:"success",children:[j,(0,n.jsx)("a",{onClick:function(){Q(x.avoid,p),t(x.avoid,p)},children:"\u79FB\u9664"},"list-loadmore-edit")]})})}})]})]})},"search_line")]},h)};function hn(){var f=(0,z.useState)("search_line"),r=M()(f,2),i=r[0],e=r[1],m=(0,z.useState)($),F=M()(m,2),s=F[0],y=F[1],E=function(t,g){var d,u,o,l=(0,Y.cloneDeep)(s),p=(d=l[t])===null||d===void 0||(u=d[g])===null||u===void 0?void 0:u.marker;B.remove(p),(o=l[t])===null||o===void 0||o.splice(g,1),y(l)};return(0,z.useEffect)(function(){_().load({key:"263eaad74d51c7e0bce9c0380b237809",version:"2.0",plugins:[]}).then(function(h){w=h,B=new w.Map("map-container",{resizeEnable:!0,center:[116.397428,39.90923],zoom:14}),sn({AMap:w,instance:B}),nn(w,B,function(t){S=t,i==="hot_line"&&ln(S,1,w)}),mn=vn({AMap:w,mapInstance:B,onSelect:function(g){y((0,Y.cloneDeep)(g))}})}).catch(function(h){console.log(h)})},[]),console.log("tabName",i),(0,n.jsx)("div",{className:a.container,children:(0,n.jsxs)("div",{className:a.main,children:[(0,n.jsx)(K.Z,{className:a.slide,children:(0,n.jsx)(pn,{tabKey:i,onTabChange:function(t){e(t)},customeLineMarkers:s,onDeleteMarker:E,onloadNavigation:function(){if(s.start.length===0||s.end.length===0){H.ZP.warning("\u8D77\u59CB\u4F4D\u7F6E\u548C\u76EE\u6807\u4F4D\u7F6E\u4E0D\u53EF\u4E3A\u7A7A");return}cn(S,s,w)},onClearNavgation:function(){S.clear(),Object.keys(s).forEach(function(t){s[t].forEach(function(g){var d=g.marker;return B.remove(d)})}),y($)}})}),(0,n.jsx)(K.Z,{className:a.content,id:"map-container"}),(0,n.jsx)("div",{className:a["text-pannel"],id:"panel"})]})})}}}]);
